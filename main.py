import random

import db
import os
# from config_reader import config
from aiogram import Bot, types
# –ü–∞–º—è—Ç—å –¥–ª—è –º–∞—à–∏–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π –∏ –º–∞—à–∏–Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π
from aiogram.contrib.fsm_storage.memory import MemoryStorage
from aiogram.dispatcher import Dispatcher
# –ú–∞—à–∏–Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∏–º–ø–æ—Ä—Ç—ã
from aiogram.dispatcher import FSMContext
from aiogram.dispatcher.filters.state import State, StatesGroup
from aiogram.types import ReplyKeyboardMarkup, KeyboardButton
from aiogram.utils import executor


storage = MemoryStorage()


class Register(StatesGroup):
    start = State()
    enter_fullname = State()
    choose_car = State()
    match = State()


# –°–æ–∑–¥–∞—ë–º –±–æ—Ç–∞ –∏—Å—Ö–æ–¥—è –∏–∑ –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞
bot = Bot(token="6631204524:AAEDWHlQrngDBkEDWYNwSlG60KzET0WPXWA")
dp = Dispatcher(bot, storage=storage)

main_keyboard = ReplyKeyboardMarkup(resize_keyboard=True, one_time_keyboard=True).add(
    KeyboardButton(text='–ü–û–ï–•–ê–õ–òüöÄ'))

cars_keyboard = ReplyKeyboardMarkup(resize_keyboard=True, one_time_keyboard=True).row(
    KeyboardButton(text='TANK300'), KeyboardButton(text='TANK500'))

actions_keyboard = ReplyKeyboardMarkup(resize_keyboard=True, one_time_keyboard=True).add(
    KeyboardButton(text='–°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É –¥–ª—è —Ä–∞–∑–≥–æ–≤–æ—Ä–∞')).add(KeyboardButton(text='–ü–æ–¥–æ–±—Ä–∞—Ç—å –Ω–æ–≤–æ–≥–æ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞'))


# –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥—ã /start
@dp.message_handler(commands='start', state='*')
async def command_start(message: types.Message, state: FSMContext):
    await state.finish()
    check_flag = await db.check_user(message.from_user.id, message.from_user.username)
    if not check_flag:
        await bot.send_message(message.from_user.id, "–ü—Ä–∏–≤–µ—Ç!\n\n"
                                                     "–Ø –±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–∂–µ—Ç –æ–±—Ä–µ—Å—Ç–∏ –Ω–æ–≤—ã–µ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞"
                                                     " –∏ –Ω–∞–π—Ç–∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö –ª—é–¥–µ–π –¥–ª—è –æ–±—â–µ–Ω–∏—è –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–∏"
                                                     " –≤ —á–µ—Å—Ç—å –≥–æ–¥–æ–≤—â–∏–Ω—ã –±—Ä–µ–Ω–¥–∞ TANK –≤ –†–æ—Å—Å–∏–∏.\n\n"
                                                     "–ß—Ç–æ–±—ã –Ω–∞–π—Ç–∏ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞, –Ω—É–∂–Ω–æ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –¥–≤–∞ –º–æ–∏—Ö –≤–æ–ø—Ä–æ—Å–∞."
                                                     " –ì–æ—Ç–æ–≤?",
                               reply_markup=main_keyboard)
        await Register.start.set()


# –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è Register.start
@dp.message_handler(state=Register.start)
async def command_start(message: types.Message, state: FSMContext):
    if "–ü–û–ï–•–ê–õ–ò" in message.text:
        await bot.send_message(message.from_user.id, "–ö–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç? –ù–∞–ø–∏—à–∏ –∏–º—è –∏ —Ñ–∞–º–∏–ª–∏—é.")
        await Register.enter_fullname.set()

    else:
        await bot.send_message(message.from_user.id, "–•–º–º.. –î–∞–π—Ç–µ –Ω–µ–º–Ω–æ–≥–æ –ø–æ–¥—É–º–∞—Ç—åü§î\n\n"
                                                     "–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —è –ø–æ–∫–∞ —á—Ç–æ –Ω–µ –º–æ–≥—É –¥–∞—Ç—å –æ—Ç–≤–µ—Ç –Ω–∞ –≤–∞—à –≤–æ–ø—Ä–æ—Å,"
                                                     " –Ω–æ –≤—ã –º–æ–∂–µ—Ç–µ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∑–∞ –ø–æ–º–æ—â—å—é –∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—É –∏–ª–∏ –∫ —Ö–æ—Å—Ç–µ—Å"
                                                     " –Ω–∞ —Å—Ç–æ–π–∫—É —Ä–µ—Å–µ–ø—à–Ω.")


# –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è Register.start
@dp.message_handler(state=Register.enter_fullname)
async def command_start(message: types.Message, state: FSMContext):
    media = types.MediaGroup()
    media.attach_photo(types.InputMediaPhoto(open("TANK300.png", 'rb'),
                                             caption=f"–¢–µ–ø–µ—Ä—å –≤—ã–±–µ—Ä–∏ —Å–≤–æ–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å TANK"))
    media.attach_photo(types.InputMediaPhoto(open("TANK500.png", 'rb')))

    await bot.send_message(message.from_user.id, f"–ü—Ä–∏—è—Ç–Ω–æ –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è, {message.text}",
                           reply_markup=cars_keyboard)

    await bot.send_media_group(message.from_user.id, media)

    await db.update_column_in_users_forms(message.text, "fullname", message.from_user.id)
    await Register.choose_car.set()


# –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∑–≤–∞–Ω–∏—è –∞–≤—Ç–æ–º–æ–±–∏–ª—è
@dp.message_handler(state=Register.choose_car)
async def command_start(message: types.Message, state: FSMContext):
    if "TANK300" in message.text or "TANK500" in message.text:
        await bot.send_message(message.from_user.id, "–Ø —É–∂–µ –Ω–∞—á–∞–ª –ø–æ–¥–±–∏—Ä–∞—Ç—å —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞, —Å –∫–æ—Ç–æ—Ä—ã–º –≤—ã –≤–º–µ—Å—Ç–µ"
                                                     " —Å–º–æ–∂–µ—Ç–µ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∞–≤—Ç–æ—Ä—Å–∫–∏–µ –∫–æ–∫—Ç–µ–π–ª–∏ –æ—Ç TANK.\n"
                                                     "–ù–µ –æ—Ç–∫–ª—é—á–∞–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ –æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å"
                                                     " –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ:")
        await db.update_column_in_users_forms(message.text, "car", message.from_user.id)
        await db.update_column_in_users_forms('false', "match_flag", message.from_user.id)
        user_id, res_user = await db.select_user_from_users_forms_with_match(message.from_user.id)
        user_tg_id = await db.select_tg_id(user_id)

        if res_user != 0:
            await bot.send_message(message.from_user.id,
                                   f"–°–ª—É—á–∏–ª—Å—è –º—ç—Ç—á! –° –ø–æ–º–æ—â—å—é –∞–ª–≥–æ—Ä–∏—Ç–º–∞ —è –Ω–∞—à–µ–ª –¥–ª—è —Ç–µ–±—è —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞ü™Ñ\n\n"
                                   f"–ï–≥–æ –∏–º—è: {res_user}\n\n"
                                   f"–ß–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç –≤—ã –≤—Å—Ç—Ä–µ—á–∞–µ—Ç–µ—Å—å –≤ –∑–æ–Ω–µ –∫–æ–∫—Ç–µ–π–ª—å–Ω–æ–≥–æ –±–∞—Ä–∞,"
                                   f" –æ–ø–æ–∑–Ω–∞—Ç—å —Å–≤–æ–µ–≥–æ –Ω–æ–≤–æ–≥–æ –∑–Ω–∞–∫–æ–º–æ–≥–æ —Å–º–æ–∂–µ—à—å –ø–æ –±–µ–π–¥–∂–∏–∫—É\n\n"
                                   f"–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏, —Ç—ã –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—à—å –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—É "
                                   f"–∏–ª–∏ –Ω–∞ —Å—Ç–æ–π–∫—É —Ä–µ—Å–µ–ø—à–Ω –∫ —Ö–æ—Å—Ç–µ—Å –∑–∞ –ø–æ–º–æ—â—å—é.")

            themes = await db.select_themes(message.from_user.id)

            random_theme = themes[0][random.randint(0, len(themes[0])-1)]
            print(f"random_theme {random_theme}")
            msg = ''

            if random_theme == "–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è":
                msg = "–î–ª—è –∫–∞–∂–¥–æ–π —Å–æ–∑–¥–∞–Ω–Ω–æ–π –º–Ω–æ—é –ø–∞—Ä—ã –¥–ª—è –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞ —è –ø—Ä–µ–¥–ª–∞–≥–∞—é —Ç–µ–º—É –¥–ª—è –æ–±—â–µ–Ω–∏—è üí≠\n" \
                      "–í–∞—à–∞ —Ç–µ–º–∞ - –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è!)\n\n" \
                      "–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ, –∫–∞–∫–∏–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –º–µ—Å—Ç–∞ –≤—ã –ø–æ—Å–µ—Ç–∏–ª–∏ –Ω–∞ —Å–≤–æ–µ–º –∞–≤—Ç–æ–º–æ–±–∏–ª–µ TANK\n\n" \
                      "–ò –∫—É–¥–∞ –±—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏—Å—å –≤ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å\n\n" \
                      "–ì—Ä–µ—Ç—å—Å—è –Ω–∞ —Ç–µ–ø–ª–æ–º –ø–µ—Å–æ—á–∫–µ —É –º–æ—Ä—è –∏–ª–∏ –ø–æ–∫–æ—Ä—è—Ç—å –≥–æ—Ä–Ω—ã–µ –≤–µ—Ä—à–∏–Ω—ã –Ω–∞ –ª—ã–∂–∞—Ö? –ß—Ç–æ –±–æ–ª—å—à–µ —Ç–µ–±–µ –ø–æ –¥—É—à–µ?"

            elif random_theme == "–ï–¥–∞":
                msg = ("–î–ª—è –∫–∞–∂–¥–æ–π —Å–æ–∑–¥–∞–Ω–Ω–æ–π –º–Ω–æ—é –ø–∞—Ä—ã –¥–ª—è –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞ —è –ø—Ä–µ–¥–ª–∞–≥–∞—é —Ç–µ–º—É –¥–ª—è –æ–±—â–µ–Ω–∏—èüí≠\n\n"
                       "–í–∞—à–∞ —Ç–µ–º–∞ -  –ï–¥–∞.\n\n"
                       "–û–±—Å—É–¥–∏—Ç–µ —Å–≤–æ–∏ –ª—é–±–∏–º—ã–µ –±–ª—é–¥–∞ –∏ —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ã,"
                       " –ø–æ—Å–æ–≤–µ—Ç—É–π—Ç–µ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫—É –∫–ª–∞—Å—Å–Ω—ã–µ –º–µ—Å—Ç–∞ –≤ –≥–æ—Ä–æ–¥–µ –∏ –∑–∞ –µ–≥–æ –ø—Ä–µ–¥–µ–ª–∞–º–∏.\n\n"
                       "–ö—Å—Ç–∞—Ç–∏, –∫—É—Ö–Ω—è –∫–∞–∫–æ–≥–æ –Ω–∞—Ä–æ–¥–∞ –º–∏—Ä–∞ –≤–∞–º –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –ø–æ –¥—É—à–µ?")

            elif random_theme == "–†–∞–±–æ—Ç–∞ –∏ –∫–∞—Ä—å–µ—Ä–∞":
                msg = ("–î–ª—è –∫–∞–∂–¥–æ–π —Å–æ–∑–¥–∞–Ω–Ω–æ–π –º–Ω–æ—é –ø–∞—Ä—ã –¥–ª—è –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞ —è –ø—Ä–µ–¥–ª–∞–≥–∞—é —Ç–µ–º—É –¥–ª—è –æ–±—â–µ–Ω–∏—èüí≠\n\n"
                       "–í–∞—à–∞ —Ç–µ–º–∞ - –†–∞–±–æ—Ç–∞ –∏ –∫–∞—Ä—å–µ—Ä–∞.\n\n"
                       "–°–æ–æ–±—â–µ—Å—Ç–≤–æ TANK - —ç—Ç–æ –ø—Ä–æ –ø–æ–ª–µ–∑–Ω—ã–µ –∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞,"
                       " –≤ —Ç–æ–º —á–∏—Å–ª–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã. –†–∞—Å—Å–∫–∞–∂–∏, —á–µ–º —Ç—ã –∑–∞–Ω–∏–º–∞–µ—à—å—Å—è?")

            elif random_theme == "–î–æ—Å—É–≥ –≤ –ú–æ—Å–∫–≤–µ":
                msg = ("–î–ª—è –∫–∞–∂–¥–æ–π —Å–æ–∑–¥–∞–Ω–Ω–æ–π –º–Ω–æ—é –ø–∞—Ä—ã –¥–ª—è –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞ —è –ø—Ä–µ–¥–ª–∞–≥–∞—é —Ç–µ–º—É –¥–ª—è –æ–±—â–µ–Ω–∏—èüí≠\n\n"
                       "–í–∞—à–∞ —Ç–µ–º–∞ - –î–æ—Å—É–≥ –≤ –ú–æ—Å–∫–≤–µ.\n\n"
                       "–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫—É –æ —Å–≤–æ–∏—Ö –ª—é–±–∏–º—ã—Ö –º–µ—Å—Ç–∞—Ö –≤ –≥–æ—Ä–æ–¥–µ."
                       " –ö—É–¥–∞ —Ç—ã –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—à—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å—Å—è –≤–º–µ—Å—Ç–µ —Å —Å–µ–º—å–µ–π –∏–ª–∏ –¥—Ä—É–∑—å—è–º–∏ –≤ –≤—ã—Ö–æ–¥–Ω—ã–µ? ")

            elif random_theme == "–°–ø–æ—Ä—Ç –∏ —É–≤–ª–µ—á–µ–Ω–∏—è":
                msg = ("–î–ª—è –∫–∞–∂–¥–æ–π —Å–æ–∑–¥–∞–Ω–Ω–æ–π –º–Ω–æ—é –ø–∞—Ä—ã –¥–ª—è –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞ —è –ø—Ä–µ–¥–ª–∞–≥–∞—é —Ç–µ–º—É –¥–ª—è –æ–±—â–µ–Ω–∏—èüí≠\n\n"
                       "–í–∞—à–∞ —Ç–µ–º–∞ - –°–ø–æ—Ä—Ç –∏ —É–≤–ª–µ—á–µ–Ω–∏—è.\n\n"
                       "–ï—Å–ª–∏ –±—ã —è –±—ã–ª —á–µ–ª–æ–≤–µ–∫–æ–º, —Ç–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞–ª –±—ã –≤—Å—ë –æ—Ç "
                       "–≤–æ–ª–µ–π–±–æ–ª–∞ –¥–æ –∫—ë—Ä–ª–∏–Ω–≥–∞. –ö–∞–∂–µ—Ç—Å—è, –º–Ω–µ –±–æ–ª—å—à–µ –Ω—Ä–∞–≤—è—Ç—Å—è –∫–æ–º–∞–Ω–¥–Ω—ã–µ –∏–≥—Ä—ã.\n\n"
                       "–ê —É —Ç–µ–±—è –µ—Å—Ç—å —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ —É–≤–ª–µ—á–µ–Ω–∏—è? ")

            new_themes = themes[0]
            print(f"new_themes {new_themes}")
            new_themes.remove(random_theme)
            print(f"new_themes {new_themes}")
            await bot.send_message(message.from_user.id, msg, reply_markup=actions_keyboard)

            name = await db.select_fullname(message.from_user.id)

            await bot.send_message(user_tg_id,
                                   f"–°–ª—É—á–∏–ª—Å—è –º—ç—Ç—á! –° –ø–æ–º–æ—â—å—é –∞–ª–≥–æ—Ä–∏—Ç–º–∞ —è –Ω–∞—à–µ–ª –¥–ª—è —Ç–µ–±—è —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞ü™Ñ\n\n"
                                   f"–ï–≥–æ –∏–º—è: {name}\n\n"
                                   f"–ß–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç –≤—ã –≤—Å—Ç—Ä–µ—á–∞–µ—Ç–µ—Å—å –≤ –∑–æ–Ω–µ –∫–æ–∫—Ç–µ–π–ª—å–Ω–æ–≥–æ –±–∞—Ä–∞,"
                                   f" –æ–ø–æ–∑–Ω–∞—Ç—å —Å–≤–æ–µ–≥–æ –Ω–æ–≤–æ–≥–æ –∑–Ω–∞–∫–æ–º–æ–≥–æ —Å–º–æ–∂–µ—à—å –ø–æ –±–µ–π–¥–∂–∏–∫—É\n\n"
                                   f"–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏, —Ç—ã –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—à—å –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—É "
                                   f"–∏–ª–∏ –Ω–∞ —Å—Ç–æ–π–∫—É —Ä–µ—Å–µ–ø—à–Ω –∫ —Ö–æ—Å—Ç–µ—Å –∑–∞ –ø–æ–º–æ—â—å—é.")
            await bot.send_message(user_tg_id, msg)
            await db.update_themes(message.from_user.id, new_themes)
            await Register.match.set()

        else:
            pass

    else:
        await bot.send_message(message.from_user.id, "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –∏–∑ –ø—É–Ω–∫—Ç–æ–≤ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã",
                               reply_markup=cars_keyboard)


@dp.message_handler(state=Register.match)
async def command_start(message: types.Message, state: FSMContext):
    if message.text == "–°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É –¥–ª—è —Ä–∞–∑–≥–æ–≤–æ—Ä–∞":
        themes = await db.select_themes(message.from_user.id)
        print(themes)
        random_theme = themes[0][random.randint(0, len(themes[0]) - 1)]
        print(random_theme)
        msg = ''

        if random_theme == "–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è":
            msg = "–î–ª—è –∫–∞–∂–¥–æ–π —Å–æ–∑–¥–∞–Ω–Ω–æ–π –º–Ω–æ—é –ø–∞—Ä—ã –¥–ª—è –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞ —è –ø—Ä–µ–¥–ª–∞–≥–∞—é —Ç–µ–º—É –¥–ª—è –æ–±—â–µ–Ω–∏—è üí≠\n" \
                  "–í–∞—à–∞ —Ç–µ–º–∞ - –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è!)\n\n" \
                  "–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ, –∫–∞–∫–∏–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –º–µ—Å—Ç–∞ –≤—ã –ø–æ—Å–µ—Ç–∏–ª–∏ –Ω–∞ —Å–≤–æ–µ–º –∞–≤—Ç–æ–º–æ–±–∏–ª–µ TANK\n\n" \
                  "–ò –∫—É–¥–∞ –±—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏—Å—å –≤ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å\n\n" \
                  "–ì—Ä–µ—Ç—å—Å—è –Ω–∞ —Ç–µ–ø–ª–æ–º –ø–µ—Å–æ—á–∫–µ —É –º–æ—Ä—è –∏–ª–∏ –ø–æ–∫–æ—Ä—è—Ç—å –≥–æ—Ä–Ω—ã–µ –≤–µ—Ä—à–∏–Ω—ã –Ω–∞ –ª—ã–∂–∞—Ö? –ß—Ç–æ –±–æ–ª—å—à–µ —Ç–µ–±–µ –ø–æ –¥—É—à–µ?"

        elif random_theme == "–ï–¥–∞":
            msg = ("–î–ª—è –∫–∞–∂–¥–æ–π —Å–æ–∑–¥–∞–Ω–Ω–æ–π –º–Ω–æ—é –ø–∞—Ä—ã –¥–ª—è –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞ —è –ø—Ä–µ–¥–ª–∞–≥–∞—é —Ç–µ–º—É –¥–ª—è –æ–±—â–µ–Ω–∏—èüí≠\n\n"
                   "–í–∞—à–∞ —Ç–µ–º–∞ -  –ï–¥–∞.\n\n"
                   "–û–±—Å—É–¥–∏—Ç–µ —Å–≤–æ–∏ –ª—é–±–∏–º—ã–µ –±–ª—é–¥–∞ –∏ —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ã,"
                   " –ø–æ—Å–æ–≤–µ—Ç—É–π—Ç–µ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫—É –∫–ª–∞—Å—Å–Ω—ã–µ –º–µ—Å—Ç–∞ –≤ –≥–æ—Ä–æ–¥–µ –∏ –∑–∞ –µ–≥–æ –ø—Ä–µ–¥–µ–ª–∞–º–∏.\n\n"
                   "–ö—Å—Ç–∞—Ç–∏, –∫—É—Ö–Ω—è –∫–∞–∫–æ–≥–æ –Ω–∞—Ä–æ–¥–∞ –º–∏—Ä–∞ –≤–∞–º –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –ø–æ –¥—É—à–µ?")

        elif random_theme == "–†–∞–±–æ—Ç–∞ –∏ –∫–∞—Ä—å–µ—Ä–∞":
            msg = ("–î–ª—è –∫–∞–∂–¥–æ–π —Å–æ–∑–¥–∞–Ω–Ω–æ–π –º–Ω–æ—é –ø–∞—Ä—ã –¥–ª—è –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞ —è –ø—Ä–µ–¥–ª–∞–≥–∞—é —Ç–µ–º—É –¥–ª—è –æ–±—â–µ–Ω–∏—èüí≠\n\n"
                   "–í–∞—à–∞ —Ç–µ–º–∞ - –†–∞–±–æ—Ç–∞ –∏ –∫–∞—Ä—å–µ—Ä–∞.\n\n"
                   "–°–æ–æ–±—â–µ—Å—Ç–≤–æ TANK - —ç—Ç–æ –ø—Ä–æ –ø–æ–ª–µ–∑–Ω—ã–µ –∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞,"
                   " –≤ —Ç–æ–º —á–∏—Å–ª–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã. –†–∞—Å—Å–∫–∞–∂–∏, —á–µ–º —Ç—ã –∑–∞–Ω–∏–º–∞–µ—à—å—Å—è?")

        elif random_theme == "–î–æ—Å—É–≥ –≤ –ú–æ—Å–∫–≤–µ":
            msg = ("–î–ª—è –∫–∞–∂–¥–æ–π —Å–æ–∑–¥–∞–Ω–Ω–æ–π –º–Ω–æ—é –ø–∞—Ä—ã –¥–ª—è –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞ —è –ø—Ä–µ–¥–ª–∞–≥–∞—é —Ç–µ–º—É –¥–ª—è –æ–±—â–µ–Ω–∏—èüí≠\n\n"
                   "–í–∞—à–∞ —Ç–µ–º–∞ - –î–æ—Å—É–≥ –≤ –ú–æ—Å–∫–≤–µ.\n\n"
                   "–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫—É –æ —Å–≤–æ–∏—Ö –ª—é–±–∏–º—ã—Ö –º–µ—Å—Ç–∞—Ö –≤ –≥–æ—Ä–æ–¥–µ."
                   " –ö—É–¥–∞ —Ç—ã –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—à—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å—Å—è –≤–º–µ—Å—Ç–µ —Å —Å–µ–º—å–µ–π –∏–ª–∏ –¥—Ä—É–∑—å—è–º–∏ –≤ –≤—ã—Ö–æ–¥–Ω—ã–µ? ")

        elif random_theme == "–°–ø–æ—Ä—Ç –∏ —É–≤–ª–µ—á–µ–Ω–∏—è":
            msg = ("–î–ª—è –∫–∞–∂–¥–æ–π —Å–æ–∑–¥–∞–Ω–Ω–æ–π –º–Ω–æ—é –ø–∞—Ä—ã –¥–ª—è –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞ —è –ø—Ä–µ–¥–ª–∞–≥–∞—é —Ç–µ–º—É –¥–ª—è –æ–±—â–µ–Ω–∏—èüí≠\n\n"
                   "–í–∞—à–∞ —Ç–µ–º–∞ - –°–ø–æ—Ä—Ç –∏ —É–≤–ª–µ—á–µ–Ω–∏—è.\n\n"
                   "–ï—Å–ª–∏ –±—ã —è –±—ã–ª —á–µ–ª–æ–≤–µ–∫–æ–º, —Ç–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞–ª –±—ã –≤—Å—ë –æ—Ç "
                   "–≤–æ–ª–µ–π–±–æ–ª–∞ –¥–æ –∫—ë—Ä–ª–∏–Ω–≥–∞. –ö–∞–∂–µ—Ç—Å—è, –º–Ω–µ –±–æ–ª—å—à–µ –Ω—Ä–∞–≤—è—Ç—Å—è –∫–æ–º–∞–Ω–¥–Ω—ã–µ –∏–≥—Ä—ã.\n\n"
                   "–ê —É —Ç–µ–±—è –µ—Å—Ç—å —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ —É–≤–ª–µ—á–µ–Ω–∏—è? ")

        new_themes = themes[0]
        print(new_themes)
        new_themes.remove(random_theme)
        print(new_themes)
        await db.update_themes(message.from_user.id, new_themes)
        await bot.send_message(message.from_user.id, msg, reply_markup=actions_keyboard)

    elif message.text == "–ü–æ–¥–æ–±—Ä–∞—Ç—å –Ω–æ–≤–æ–≥–æ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞":
        await bot.send_message(message.from_user.id, "–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ")

    else:
        await bot.send_message(message.from_user.id, "–£–≤–µ—Ä–µ–Ω, –≤–∞–º —Å —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–æ–º –±—É–¥–µ—Ç –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ —ç—Ç–æ –æ–±—Å—É–¥–∏—Ç—åüôåüèª\n"
                                                     "–í–æ–∑–º–æ–∂–Ω–æ –≤–∞—à —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫ —É–∂–µ –∂–¥–µ—Ç —Ç–µ–±—è —É –±–∞—Ä–Ω–æ–π —Å—Ç–æ–π–∫–∏."
                                                     " –ñ–µ–ª–∞—é –∫–ª–∞—Å—Å–Ω–æ –ø—Ä–æ–≤–µ—Å—Ç–∏ –≤—Ä–µ–º—è!")

executor.start_polling(dp, skip_updates=True)
